<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Lesson on Linear Regression</title>

  <meta property="description" itemprop="description" content="An overview of Linear Regression using data from the Foundation of AIDS Research"/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-03-16"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-03-16"/>
  <meta name="article:author" content="Elizabeth Shin"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Lesson on Linear Regression"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="An overview of Linear Regression using data from the Foundation of AIDS Research"/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Lesson on Linear Regression"/>
  <meta property="twitter:description" content="An overview of Linear Regression using data from the Foundation of AIDS Research"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Lesson on Linear Regression"]},{"type":"character","attributes":{},"value":["An overview of Linear Regression using data from the Foundation of AIDS Research\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation"]}},"value":[{"type":"character","attributes":{},"value":["Elizabeth Shin"]},{"type":"character","attributes":{},"value":["Swarthmore College"]}]}]},{"type":"character","attributes":{},"value":["03-16-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["dist_ssp_amfar.csv","lesson-on-linear-regression_files/anchor-4.2.2/anchor.min.js","lesson-on-linear-regression_files/bowser-1.9.3/bowser.min.js","lesson-on-linear-regression_files/distill-2.2.21/template.v2.js","lesson-on-linear-regression_files/figure-html5/All Models-1.png","lesson-on-linear-regression_files/figure-html5/All-Models-1.png","lesson-on-linear-regression_files/figure-html5/Coefficient Plot-1.png","lesson-on-linear-regression_files/figure-html5/Equal Residual Variance-1.png","lesson-on-linear-regression_files/figure-html5/Independent Observations-1.png","lesson-on-linear-regression_files/figure-html5/Normal Residual Distribution-1.png","lesson-on-linear-regression_files/figure-html5/Pairs Plot-1.png","lesson-on-linear-regression_files/figure-html5/Scatterplot-1.png","lesson-on-linear-regression_files/figure-html5/Side by Side Plots-1.png","lesson-on-linear-regression_files/figure-html5/unnamed-chunk-2-1.png","lesson-on-linear-regression_files/figure-html5/unnamed-chunk-3-1.png","lesson-on-linear-regression_files/figure-html5/unnamed-chunk-4-1.png","lesson-on-linear-regression_files/figure-html5/unnamed-chunk-5-1.png","lesson-on-linear-regression_files/figure-html5/unnamed-chunk-6-1.png","lesson-on-linear-regression_files/figure-html5/unnamed-chunk-8-1.png","lesson-on-linear-regression_files/header-attrs-2.5/header-attrs.js","lesson-on-linear-regression_files/jquery-1.11.3/jquery.min.js","lesson-on-linear-regression_files/webcomponents-2.0.0/webcomponents.js","LINE assumptions.jpg","opioid_county_codebook.xlsx"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="lesson-on-linear-regression_files/header-attrs-2.5/header-attrs.js"></script>
  <script src="lesson-on-linear-regression_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="lesson-on-linear-regression_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="lesson-on-linear-regression_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="lesson-on-linear-regression_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="lesson-on-linear-regression_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Lesson on Linear Regression","description":"An overview of Linear Regression using data from the Foundation of AIDS Research","authors":[{"author":"Elizabeth Shin","authorURL":"#","affiliation":"Swarthmore College","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-03-16T00:00:00.000+00:00","citationText":"Shin, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Lesson on Linear Regression</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>An overview of Linear Regression using data from the Foundation of AIDS Research</p></p>
</div>

<div class="d-byline">
  Elizabeth Shin  (Swarthmore College)
  
<br/>03-16-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#linear-regression-an-overview">Linear Regression: An Overview</a></li>
<li><a href="#importing-the-data">Importing the Data</a></li>
<li><a href="#eda">EDA</a></li>
<li><a href="#plotting-the-data">Plotting the Data</a></li>
<li><a href="#fitting-the-linear-model">Fitting the Linear Model</a>
<ul>
<li><a href="#assumptions">Assumptions</a></li>
<li><a href="#bonus-analysis">Bonus Analysis</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</nav>
</div>
<h1 id="linear-regression-an-overview">Linear Regression: An Overview</h1>
<p>Linear modeling is a fundamental aspect of statistics. One of the most ubiquitous predictive modeling methods, linear regression, is useful for its simplicity in implementation and interpretation. While linear regression is used to predict the value of a continuous response variable <em>Y</em> as a function of one or more explanatory variables <em>X</em> using a mathematical function, this technique operates with several underlying assumptions and is sensitive to outliers.</p>
<p>Linear regression is useful for analyzing relationships among variables of interest and determining whether there is a linear or non-linear association among them, which is essential for exploratory data analysis and in choosing suitable models. To check whether the data we are attempting to model is suitable for linear regression, we must examine four assumptions which are summarized as <strong>L.I.N.E</strong>:</p>
<ul>
<li><strong>L</strong>inear relationship [between the <em>X</em> and <em>Y</em> variables]</li>
<li><strong>I</strong>ndependent observations [there is no relationship between the residuals and predictor variable(s)]</li>
<li><strong>N</strong>ormal residuals [the distribution should be <em>symmetric</em>, <em>unimodal</em>, and approximately <em>bell-shaped</em>]</li>
<li><strong>E</strong>qual variance in residuals [there is no relationship between the residuals and fitted values]</li>
</ul>
<p>The mathematical equation of linear regression can be modeled as:</p>
<p><span class="math inline">\(Y = \beta_1 + \beta_2X + \epsilon\)</span></p>
<p>where <span class="math inline">\(\beta_1\)</span> represents the intercept, <span class="math inline">\(\beta_2\)</span> signifies the slope, and <span class="math inline">\(\epsilon\)</span> stands for the error term. <span class="math inline">\(Y\)</span> is the outcome variable, which is predicted by <span class="math inline">\(X\)</span> as the input variable. Furthermore, there can be multiple <span class="math inline">\(X\)</span> variables that are either continuous or categorical (i.e. <span class="math inline">\(X_2\)</span>, <span class="math inline">\(X_3\)</span>, etc.).</p>
<hr />
<p>As an example, we will examine the Needle Exchange Data, a dataset gathered from <strong>amFAR</strong> (the Foundation of AIDS Research), to analyze how the distance to nearest syringe program (<code>dist_SSP</code>) relates to percent uninsured (<code>pctunins</code>). In the following overview, we will walk through how to perform <strong>EDA</strong> (Exploratory Data Analysis), review the <strong>L.I.N.E.</strong> assumptions,and fit the linear model to the data. In addition, we will provide guidance on data visualization and plot aesthetics. For the purpose of this example, we will only analyze the two variables mentioned above. Although it is relatively simple to add more explanatory variables to a linear model, analyzing and graphing the data can quickly become complicated. For further information, see this tutorial on Multivariate Regression: <a href="https://openintro.shinyapps.io/ims-04-multivariable-and-logistic-models-03/#section-multiple-regression" class="uri">https://openintro.shinyapps.io/ims-04-multivariable-and-logistic-models-03/#section-multiple-regression</a></p>
<h1 id="importing-the-data">Importing the Data</h1>
<p>To preface this overview, we must install and load the following packages into R:</p>
<ul>
<li><code>tidyverse</code></li>
<li><code>tidymodels</code></li>
<li><code>patchwork</code></li>
<li><code>moderndive</code></li>
<li><code>GGally</code></li>
<li><code>readxl</code></li>
</ul>
<p>First, load the data:</p>
<p><em>Note: You might have to specify the file path to the data if it is not uploaded to a folder that you can directly access from your ‘Home’ page as is shown below.</em></p>
<p>To download these files to follow along with the exercise, go to this <a href="%22https://github.com/Eli2022/Personal-Projects/blob/main/Project_Linear_Regression_Lesson/dist_ssp_amfar.csv%22">GitHub page</a> for the <code>.csv file</code> and <a href="%22https://github.com/Eli2022/Personal-Projects/blob/main/Project_Linear_Regression_Lesson/opioid_county_codebook.xlsx%22">this page</a> for the <code>.xlsx file</code>.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>We named the Needle Exchange Data as <code>needex</code> and will refer to it henceforth when calling the data. The <code>needex_codebook</code> contains a description for the variable names used in <code>needex</code> (as well as many others). You can locate the variable names quickly in the codebook by searching using <strong>Ctrl + F</strong>.</p>
<hr />
<h1 id="eda">EDA</h1>
<p>To start off, we should observe the variable types in the dataset:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code># A tibble: 6 x 7
  county         STATEABBREVIATI… dist_SSP HIVprevalence opioid_RxRate
  &lt;chr&gt;          &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
1 wabasha county MN                   47.4          49.7           8.3
2 johnson county GA                  125           283.            3  
3 iron county    MO                   77.2         103.          131. 
4 kosciusko cou… IN                   42.1          52.1          64.2
5 delaware coun… OK                   49.2          77.9          78.7
6 scurry county  TX                  141            70.7          81.5
# … with 2 more variables: pctunins &lt;dbl&gt;, metro &lt;chr&gt;</code></pre>
</div>
<p>Using the <code>head()</code> function, we can observe the first 6 rows and each variable name in the dataset. You may also specify the number of rows of data shown using <code>n = ...</code>, but the default is 6 rows.</p>
<p>Notice that we have three categorical variables: <code>county</code>, <code>STATEABBREVIATION</code>, and <code>metro</code>. Our four numerical variables are as follows: <code>dist_SSP</code>, <code>HIVprevalence</code>, <code>opioid_RxRate</code>, and <code>pctunins</code>.</p>
<p>You could check the <code>needex_codebook</code> for the descriptor for each variable, but for the sake of brevity we will clarify several of the variables:</p>
<ul>
<li><code>dist_SSP</code> = distance to nearest syringe services program (in miles)</li>
<li><code>HIVprevalence</code> = # living people diagnosed w/ HIV per 100,000 (including adults and adolescents 13+)</li>
<li><code>opioid_RxRate</code> = # opioid prescriptions per 100 people</li>
<li><code>pctunins</code> = % civilian population (not in an institution) w/o health insurance coverage</li>
<li><code>metro</code> = whether the geographical location is considered metropolitan or not <em>(NOTE: This is a personal interpretation because the <code>needex_codebook</code> did not provide a definition)</em></li>
</ul>
<p>We can then create a <em>pairs plot</em> - using the <code>GGally</code> package - to display a scatterplot matrix of all the quantitative variables from the <code>needex</code> dataset.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/Pairs%20Plot-1.png" width="624" /></p>
</div>
<p>Looking at the <em>pairs plot</em>, it appears that the strongest correlation of <strong>0.0.413</strong> among the quantitative variables is between <code>dist_SSP</code> and <code>pctunins</code> (shown at the top right) while the scatterplot of that relationship is displayed in the bottom left. Typically, a correlation coefficient between 0.3 to 0.7 is considered to be of <em>moderate</em> strength. Thus, we can say that the relationship between <code>dist_SSP</code> and <code>pctunins</code> is a <em>positive</em>, moderate correlation.</p>
<p>While you knew from earlier that we were going to analyze the relationship between <code>dist_SSP</code> and <code>pctunins</code>, we have shown through <strong>EDA</strong> how you can explore the relationships among your variables to determine which variables are appropriate to focus on and model further.</p>
<p>The code for producing a scatterplot of <code>dist_SSP</code> and <code>pctunins</code> is shown:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/Scatterplot-1.png" width="624" /></p>
</div>
<hr />
<h1 id="plotting-the-data">Plotting the Data</h1>
<p>Does the scatterplot above seem a bit hard to interpret without context? It should. In R, you can visualize your graph in countless ways - adjusting the parameters, changing the titles and labels, layering <code>geoms</code> and <code>aesthetics</code>, adding colors and gradients and shapes and text, etc. We should start by changing the labels of the x- and y-axis to more appropriate titles.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/unnamed-chunk-2-1.png" width="624" /></p>
</div>
<p>To make the plot more aesthetically pleasing, you may also use the <code>theme()</code> function to adjust the size, color, font, and remove/add other features of the text in the labels.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/unnamed-chunk-3-1.png" width="624" /></p>
</div>
<p>We should add a least-squares line to the graph since we have already determined that there is a positive, <em>moderate</em> correlation between the explanatory and response variable. In addition, if you would rather not manually change the aesthetics of your graph, you can use <code>ggthemes</code> to choose from readily available formats at your preference. For an overview of available themes, you can check out <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" class="uri">https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/</a>. To reduce the amount of code written in the following chunk, I selected an arbitrary theme. I added the least-squares line using <code>stat_smooth(method = "lm")</code>, which instructs R to fit a <strong>linear model</strong> to the data.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/unnamed-chunk-4-1.png" width="624" /></p>
</div>
<p>One thing you should notice is that the standard error remains relatively small around 3 - 20 percent. The standard error increases around the least-squares line at higher percentages of civilians without health insurance. This is a result of less values located between 20 - 36%. Standard error increases when standard deviation (variance of a population) increases, which occurs when the sample size decreases. You could possibly interpret that the larger standard error between 20 - 36 % percent comes from the smaller sample size within that range. Since the data clusters between 3 - 20 %, the standard error is smaller.</p>
<p>If you look closely, you’ll see that no dots appear between 0-3%. How did we know that the cutoff of the least-squares line was around 3 percent instead of 2 or 2.5 (which isn’t readily observable by the tick marks along the x-axis)? You can use the <code>range()</code> function to find the minimum and maximum of a vector. Out of curiosity, we can also examine the min and max of the outcome variable as well.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>[1]  3.0 35.9</code></pre>
<pre><code>[1]   0 510</code></pre>
</div>
<p>Interesting! It appears that the range of people without health insurance falls between 3 - 36 %, while the distance to the nearest syringe program can range between 0 - 510 miles. 510 miles is longer than the length of Florida!</p>
<p>However, this only tells us so much about the data. To gain more insight, we will fit the linear model to the data and check the <strong>L.I.N.E.</strong> assumptions to determine how well the model suits the data.</p>
<hr />
<h1 id="fitting-the-linear-model">Fitting the Linear Model</h1>
<p>We fit our model to the variables of interest:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code># A tibble: 2 x 7
  term      estimate std_error statistic p_value lower_ci upper_ci
  &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 intercept    12.5     10.2        1.23   0.221    -7.51    32.5 
2 pctunins      7.82     0.773     10.1    0         6.30     9.34</code></pre>
<pre><code># A tibble: 1 x 1
    cor
  &lt;dbl&gt;
1 0.413</code></pre>
</div>
<p>Fitting the model doesn’t mean that R will automatically display the values of that linear model to us. We used the function <code>get_regression_table()</code> to output the regression table. We then calculated the correlation between <code>dist_SSP</code> and <code>pctunins</code> and got <code>0.4126744</code> in R Markdown. Look familiar? It’s exactly the same as the <code>0.413</code> correlation from the <em>pairs plot</em>! We just wanted to demonstrate how to calculate the correlation between and among all the numerical variables of <code>needex</code> manually, yet also how much simpler (and faster!) <code>GGally</code> package can make it for us! The beauty of R is how versatile it is in terms of function and accessibility to statisticians of all levels!</p>
<h2 id="assumptions">Assumptions</h2>
<p>Now that we have performed EDA, plotted the linear relationship between the explanatory <em>X</em> variable and outcome <em>Y</em> variable, and fitted the model to the data, we must check how suitable the model by checking the <strong>L.I.N.E.</strong> assumptions.</p>
<ol type="1">
<li>There must be a <strong>L</strong>inear relationship between independent and dependent variables.</li>
</ol>
<p>We have already shown this multiple times above, but we will include a graph here. We will format this in a new theme for fun since we’re in a new section. In addition, if you wish to remove the standard error of the line from the scatterplot, then simply set <code>se = FALSE</code> inside <code>stat_smooth()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/unnamed-chunk-5-1.png" width="624" /></p>
</div>
<p>While we know that the positive correlation is only of <em>moderate</em> strength, it was the strongest correlation among the numerical variables of <code>needex</code> and so was the most suited for a linear model. Just to double check, let’s layer other models to see if they fit the data well.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/All-Models-1.png" width="624" data-distill-preview=1 /></p>
</div>
<p>The General Additive Model (GAM) is an extension of linear models with a smoothing function. Thus, it doesn’t differ much from the Linear Regression model using the ordinary least squares (OLS) line. However, the Local Regression (LOESS) model jumps up and down a lot from about 3 - 15 %. LOESS is used to fit multiple regressions in a local range, which is most often applied to smooth a fluctuating time series. In this case, it doesn’t add much relevant detail to the scatterplot at first glance, and this is a scatterplot instead of a time series.</p>
<p>Let’s check the other assumptions.</p>
<ol start="2" type="1">
<li>The observations must be <strong>I</strong>ndependent such that there is <em>no</em> relationship between residuals and the predictor <em>X</em> variable.</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/Independent%20Observations-1.png" width="624" /></p>
</div>
<p>While at first glance it appears that this scatterplot displays a slight downwards correlation (due to the cluster of points below 0 on the y-axis and between 3 - 20% on the x-axis), we should check the correlation between the predictor variable and the residuals as well as add an OLS line.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code># A tibble: 1 x 1
        cor
      &lt;dbl&gt;
1 -5.14e-16</code></pre>
<p><img src="lesson-on-linear-regression_files/figure-html5/unnamed-chunk-6-1.png" width="624" /></p>
</div>
<p>Surprise (or maybe not)! The correlation coefficient is quite low (orders of magnitude away from a concerning value for the assumption) and adding the line shows a near perfect horizontal slope, which indicates that there is no relationship between the % uninsured and residuals. The observations are independent of each other such that the order in which the data was collected does <em>not</em> matter.</p>
<ol start="3" type="1">
<li>A <strong>N</strong>ormal distribution of residuals would exhibit a symmetric, unimodal, bell-shaped curve.</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/Normal%20Residual%20Distribution-1.png" width="624" /></p>
</div>
<p>While the distribution seems slightly right-skewed, the distribution is unimodal and roughly bell-shaped. We can note these observations, but overall shouldn’t be highly concerned about the shape of this particular distribution.</p>
<ol start="4" type="1">
<li>We should see <strong>E</strong>qual variance in residuals. In a scatter plot of residuals by fitted values, there should be no relationship. The fitted values are simply the predicted response values given an input.</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/Equal%20Residual%20Variance-1.png" width="624" /></p>
</div>
<p>There appears to be no relationship between the residuals and fitted values, which indicates that the residuals vary equally.</p>
<p>If you would also like to see the plots of the assumptions side by side, we can combine these <code>ggplots</code> using one of the features of the <code>patchwork</code> package. One thing to note is that the plots for ‘Independent Observations’ and ‘Variance in Residuals’ look very similar to one another, which is not always the case. Certainly we would want to see <em>no</em> relationships between the axes, but this does not guarantee that the plots would look similar.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/Side%20by%20Side%20Plots-1.png" width="624" /></p>
</div>
<p>In fact, here’s an image from a lab that displays non-similar plots for the assumptions of <strong>I</strong>ndependent Observations (leftmost graph) and <strong>E</strong>qual Variance in Residuals (rightmost graph) from <a href="http://www.swarthmore.edu/NatSci/aluby1/stat041/Labs/Lab05-ols.html#" class="uri">http://www.swarthmore.edu/NatSci/aluby1/stat041/Labs/Lab05-ols.html#</a>.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="LINE%20assumptions.jpg" width="384" /></p>
</div>
<p>Now let’s take a look at the coefficients of our linear model:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code># A tibble: 2 x 7
  term        estimate std.error statistic  p.value conf.low conf.high
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)    12.5     10.2        1.23 2.21e- 1    -7.51     32.5 
2 pctunins        7.82     0.773     10.1  5.56e-22     6.30      9.34</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/Coefficient%20Plot-1.png" width="624" /></p>
</div>
<p>Coefficient plots are helpful in visualizing estimates in a regression model (usually with many parameters) in terms of uncertainty and magnitude of effect - which is not really shown here since we only included one estimate aside from the intercept. They are also used to compare the estimates of models, in which smaller confidence intervals indicate less uncertainty. For more information and in-depth examples exploring the mentioned uses of coefficient plots, you can visit <a href="https://cran.r-project.org/web/packages/jtools/vignettes/summ.html" class="uri">https://cran.r-project.org/web/packages/jtools/vignettes/summ.html</a>.</p>
<blockquote>
<p><em>Congratulations!</em> You have performed all four <strong>L.I.N.E.</strong> checks, which indicates that using a linear regression model was an appropriate choice to fit to this data.</p>
</blockquote>
<h2 id="bonus-analysis">Bonus Analysis</h2>
<p>So far, we’ve only explored the linear relationship between <code>dist_SSP</code> and <code>pctunins</code> - two numerical variables of <code>needex</code>. Let’s check out the relationship between <code>pctunins</code> and <code>metro</code>. Since <code>metro</code> is a categorical variable <em>and</em> binary (<code>metro</code> or <code>non-metro</code>), we should plot the data as a boxplot instead.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="lesson-on-linear-regression_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p>Note that the vertical lines in the middle of the boxplots represents the <strong>median</strong>, <em>not</em> the <strong>mean</strong>. Instead, the diagonal red line connects the <strong>mean</strong> of the <code>non-metro</code> and <code>metro</code> groups.</p>
<p>The median (and mean) percentage of uninsured people of <code>non-metro</code> appear(s) somewhat higher than <code>metro</code>. For statistical analyses, instead of using a linear model, this calls for a t-test - or more specifically, a <strong>two-sample t-test</strong>. This t-test will compare the two means to test whether the mean of the <code>non-metro</code> group is significantly different from that of the <code>metro</code> group.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>
    Two Sample t-test

data:  pctunins by metro
t = -4.1892, df = 498, p-value = 3.312e-05
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -2.7055006 -0.9779436
sample estimates:
    mean in group metro mean in group non-metro 
               11.17434                13.01606 </code></pre>
</div>
<p>The means of the two groups are extremely statistically significant (<em>P</em> = 0.0003) from each other. In addition, we can specifically analyze a subset of the data using the <code>filter()</code> function. For instance:</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code># A tibble: 6 x 7
  county         STATEABBREVIATI… dist_SSP HIVprevalence opioid_RxRate
  &lt;chr&gt;          &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
1 lebanon county PA                   60.2          39.7          48.1
2 york county    PA                   42.1          70.8          51.6
3 huntingdon co… PA                   95.5          48.1          49.9
4 fayette county PA                   23.2          27.1         107  
5 clearfield co… PA                   88            25.8          61.3
6 susquehanna c… PA                   28.9          27.9          48  
# … with 2 more variables: pctunins &lt;dbl&gt;, metro &lt;chr&gt;</code></pre>
<pre><code>
    Two Sample t-test

data:  pctunins by metro
t = -0.92033, df = 12, p-value = 0.3755
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -3.656068  1.484639
sample estimates:
    mean in group metro mean in group non-metro 
               8.571429                9.657143 </code></pre>
</div>
<p>Incredible! When comparing the mean percentages of uninsured people from <code>non-metro</code> and <code>metro</code> areas in PA, they are not statistically significant from each other (<em>P</em> = 0.3755)even though the <code>non-metro</code> mean is still a bit higher. This also demonstrates how the overall patterns found in the whole dataset might mask individual trends in subsets and highlights the importance of analyzing data on multiple levels.</p>
<hr />
<h1 id="conclusion">Conclusion</h1>
<p>Our hope is that with this exercise, you have developed a greater understanding of linear regression and how it is constructed in R. We have reviewed how to import packages and data into R, perform steps to EDA, adjust aesthetic features of plots, work through stages of fitting a model and check assumptions, and even briefly include how to build and interpret a two-sample t-test. While the analyses of this data led to interesting results, what is more important (and exciting!) is that you are now able to apply what you have learned to construct a linear regression model and test its suitability for almost any dataset. In the scenario that using a linear model is not appropriate, you can look to logistic regression, transformation, or segmentation/clustering of data.</p>
<p>If you’re interested in learning more information about linear regression, see here: <a href="http://r-statistics.co/Linear-Regression.html" class="uri">http://r-statistics.co/Linear-Regression.html</a></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
